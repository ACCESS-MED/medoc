#!/usr/bin/env ruby
require_relative "../lib/whedon"
require 'thor'

class WhedonCli < Thor
  desc "reviews", "Lists open reviews"
  def reviews
    reviews = Whedon::Reviews.new(ENV['JOSS_REVIEW_REPO'])
    puts reviews.current
  end

  desc "open", "Open browser for review"
  def open(issue_id)
    `open https://github.com/#{ENV['JOSS_REVIEW_REPO']}/issues/#{issue_id}`
  end

  desc "verify", "Check that the submission looks good"
  def verify(issue_id)
    review = Whedon::Review.new(issue_id, ENV['JOSS_REVIEW_REPO'])
    review.verify
  end
end

WhedonCli.start
